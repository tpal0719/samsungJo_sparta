<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파이어베이스 테스트</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .onepoint {
            background-color: green;
            text-align: center;
            font-size: 200%;
        }

        .textbox {


            position: absolute;
            left: 25%;
            top: 10%;
            font-size: 25pt;
        }

        .profile {
            position: relative;
            left: 3%;
        }

        .favorite {
            text-align: center;

        }

        .h2_title {
            position: relative;
            left: 3%;
        }

        .favorite>img {
            margin: auto 50px auto 50px;
        }
    </style>



    <script type="module"> // firebase사용할때 type 도 모듈로 해놓으면 좋다

        // ============= [START] Firebase 설정 ====================
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


        // Firebase 구성 정보 설정
        const firebaseConfig = {
            apiKey: "AIzaSyDpcldklWh9hp-hLOkeO38vpsdTxXrRRoU",
            authDomain: "sparta-samsungjo.firebaseapp.com",
            projectId: "sparta-samsungjo",
            storageBucket: "sparta-samsungjo.appspot.com",
            messagingSenderId: "884455601062",
            appId: "1:884455601062:web:17e0684ff0d5a9b21bd567",
            measurementId: "G-LG33ZR3PVD"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ================== [END] Firebase 설정 =========================

        // // [START] 데이터 추가하는 로직
        // $("#postingbtn").click(async function () {   // 어떤 id에 클릭을 담으면 해당 내용을 실행한다
        //     let doc = {};
        //     await addDoc(collection(db, "teamOne"), doc);
        // })
        // // [END] 데이터 추가하는 로직


        $("#postingbtn").click(async function () {
            let doc = {
                '한줄소개': '한줄소개2',
                '이름': '이름2',
                '프로필사진': "",
                'MBTI': 'MBTI2',
                '나의장점': '나의장점2',
                '협업스타일': '협업스타일2',
                '블로그주소': 'http://naver.com',
                '나의설명': '',
                '관심사1': '',
                '관심사2': '',
                '관심사3': '',
                '관심사4': '',
            };
            await addDoc(collection(db, "TEAMONE1"), doc);
        })

        // // [START] 데이터 읽는 로직
        // let docs = await getDocs(collection(db, "콜렉션이름"));
        // docs.forEach((doc) => {
        //     let row = doc.data();
        //     console.log(row);
        // });
        // // [END] 데이터 읽는 로직


        let docs = await getDocs(collection(db, "TEAMONE1"));
        docs.forEach((doc) => {

            let row = doc.data();
            console.log(row);
            
            let mymbti = row['MBTI']
            let favor1 = row['관심사1']
            let favor2 = row['관심사2']
            let favor3 = row['관심사3']
            let favor4 = row['관심사4']
            let myintro = row['나의설명']
            let myGoods = row['나의장점']
            let myblogurl = row['블로그주소']
            let myname = row['이름']
            let profile = row['프로필']
            let myline = row['한줄소개']
            let myTogether = row['협업스타일']


            let temp_html = `
            <!-- 한줄 소개  -->
            <div class="onepoint">
                <h1>"${myline}"".</h1>
            </div>
            <!-- 한줄 소개 끝 -->

            <!-- 자기소개 -->
            <div>
                <div>
                    <!-- 프로필 이미지 -->
                    <img class="profile"
                        src= "${profile}"
                        alt="프로필" width=400px, height=400px>
                    <!-- 프로필 이미지 -->

                    <!-- 프로필 설명 -->
                    <div class="textbox">
                        <p>설명:"${myintro}"</p>
                        <p>장점:"${myGoods}"</p>
                        <p>협업:"${myTogether}"</p>
                        <p>블로그:<a href="${myblogurl}">${myblogurl}</a></p>
                    </div>
                    <!-- 프로필 설명 -->

                </div>
            </div>
            <!-- 자기소개 끝 -->


            <!-- 줄 -->
            <hr>
            <!-- 줄 -->


            <div>
                <div class="h2_title">
                    <h2>관심사 간단 소개</h2>
                </div>

                <!-- 관심사 이미지 -->
                <div class="favorite">
                    <img src="${favor1}"
                        alt="관심사1" width=300px, height=300px>
                    <img src="${favor2}"
                        alt="관심사2" width=300px, height=300px>
                    <img src="${favor3}"
                        alt="관심사3" width=300px, height=300px>
                    <img src="${favor4}"
                        alt="관심사4" width=300px, height=300px>
                </div>

                <div id="card" class="row row-cols-1 row-cols-md-4 g-4">

                </div>
                <!-- 관심사 이미지  끝 -->
            </div>
        </div>`;
            $('#card').append(temp_html);

        });







    </script>
</head>

<body>
    <div>
        <!-- 
        <button id="postingbtn" type="button" class="btn btn-primary btn-lg">데이터입력</button>
        <button id="getTeamOne1" type="button" class="btn btn-secondary btn-lg">팀원1</button>
        <button id="getTeamOne2" type="button" class="btn btn-secondary btn-lg">팀원2</button>
        <button id="getTeamOne3" type="button" class="btn btn-secondary btn-lg">팀원3</button>
        <button id="getTeamOne4" type="button" class="btn btn-secondary btn-lg">팀원4</button>
        <button id="getTeamOne5" type="button" class="btn btn-secondary btn-lg">팀원5</button> -->

        <div id="card">
        </div>

    </div>

</body>

</html>