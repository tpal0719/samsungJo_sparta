<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>파이어베이스 테스트</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>

    </style>



    <script type="module"> // firebase사용할때 type 도 모듈로 해놓으면 좋다

        // ============= [START] Firebase 설정 ====================
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


        // Firebase 구성 정보 설정
        const firebaseConfig = {
            apiKey: "AIzaSyDpcldklWh9hp-hLOkeO38vpsdTxXrRRoU",
            authDomain: "sparta-samsungjo.firebaseapp.com",
            projectId: "sparta-samsungjo",
            storageBucket: "sparta-samsungjo.appspot.com",
            messagingSenderId: "884455601062",
            appId: "1:884455601062:web:17e0684ff0d5a9b21bd567",
            measurementId: "G-LG33ZR3PVD"
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ================== [END] Firebase 설정 =========================

        // // [START] 데이터 추가하는 로직
        // $("#postingbtn").click(async function () {   // 어떤 id에 클릭을 담으면 해당 내용을 실행한다
        //     let doc = {};
        //     await addDoc(collection(db, "teamOne"), doc);
        // })
        // // [END] 데이터 추가하는 로직


        $("#postingbtn").click(async function () {
            let doc = { 'name': '박세미', 'MBTI': 'ESTP' };
            await addDoc(collection(db, "TEAMONE"), doc);
        })

        // // [START] 데이터 읽는 로직
        // let docs = await getDocs(collection(db, "콜렉션이름"));
        // docs.forEach((doc) => {
        //     let row = doc.data();
        //     console.log(row);
        // });
        // // [END] 데이터 읽는 로직


        let docs = await getDocs(collection(db, "TEAMONE"));
        docs.forEach((doc) => {
            let row = doc.data();
            let name = row['name']
            let mbti = row['MBTI']

            $('#myname').text(name);
            $('#mymbti').text(mbti);

            localStorage.setItem('키', '값');
            console.log(localStorage.getItem('키'));
        });

        $("getTeamOne1").click(async function () {
            let docs = await getDocs(collection(db, "TEAMONE"));
            docs.forEach((doc) => {
                let row = doc.data();
                let name = row['name']
                let mbti = row['MBTI']

                $('#myname').text(name);
                $('#mymbti').text(mbti);

                localStorage.setItem('키', '값');
                console.log(localStorage.getItem('키'));
                console.log('외않나와');
            });
        });

        $("getTeamOne2").click(async function () {
            let docs = await getDocs(collection(db, "TEAMONE"));
            docs.forEach((doc) => {
                let row = doc.data();
                let name = row['name']
                let mbti = row['MBTI']

                $('#myname').text(name);
                $('#mymbti').text(mbti);

            });
        });

        $("getTeamOne3").click(async function () {
            let docs = await getDocs(collection(db, "TEAMONE"));
            docs.forEach((doc) => {
                let row = doc.data();
                let name = row['name']
                let mbti = row['MBTI']

                $('#myname').text(name);
                $('#mymbti').text(mbti);

            });
        });

        $("getTeamOne4").click(async function () {
            let docs = await getDocs(collection(db, "TEAMONE"));
            docs.forEach((doc) => {
                let row = doc.data();
                let name = row['name']
                let mbti = row['MBTI']

                $('#myname').text(name);
                $('#mymbti').text(mbti);
            });
        });

        $("getTeamOne5").click(async function () {
            let docs = await getDocs(collection(db, "TEAMONE"));
            docs.forEach((doc) => {
                let row = doc.data();
                let name = row['name']
                let mbti = row['MBTI']

                $('#myname').text(name);
                $('#mymbti').text(mbti);

            });
        });



    </script>
</head>

<body>
    <button id="postingbtn" type="button" class="btn btn-primary btn-lg">데이터입력</button>
    <button id="getTeamOne1" type="button" class="btn btn-secondary btn-lg">팀원1</button>
    <button id="getTeamOne2" type="button" class="btn btn-secondary btn-lg">팀원2</button>
    <button id="getTeamOne3" type="button" class="btn btn-secondary btn-lg">팀원3</button>
    <button id="getTeamOne4" type="button" class="btn btn-secondary btn-lg">팀원4</button>
    <button id="getTeamOne5" type="button" class="btn btn-secondary btn-lg">팀원5</button>

    <h1> 내이름: <span id="myname"></span></h1>
    <h1> 내엠비티아이: <span id="mymbti"></span></h1>
</body>

</html>